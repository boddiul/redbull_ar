<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Texture Loading Example</title>
    <style>
      body {
        margin: 0;
      }
      canvas {
        display: block;
      }
    </style>
  </head>
  <body>
    <script src="js/three.js"></script>
    <script>
      // Create a scene
      const scene = new THREE.Scene();

      // Create a camera
      const camera = new THREE.PerspectiveCamera(
        75, window.innerWidth / window.innerHeight, 0.1, 1000
      );
      camera.position.set(0, 0, 5);

      // Create a renderer
      const renderer = new THREE.WebGLRenderer();
      renderer.setSize(window.innerWidth, window.innerHeight);
      document.body.appendChild(renderer.domElement);

      // Load a texture
      const textureLoader = new THREE.TextureLoader();
      const texture = textureLoader.load('other/sample.png');

      // Create a material
      const material = new THREE.MeshBasicMaterial({
        map: texture
      });

      // Create a geometry
      const geometry = new THREE.BoxGeometry(1, 1, 1);

      // Create a mesh and apply the material
      const mesh = new THREE.Mesh(geometry, material);

      // Add the mesh to the scene
      scene.add(mesh);


      const video = document.createElement('video');
		video.id = 'ar_video';
		video.autoplay = true;
		//video.muted = true;
		video.crossOrigin = 'anonymous';
		video.webkitPlaysinline = true;
		video.style.display = 'none';

		const source = document.createElement('source');
		source.src = 'videos_compressed/Alina Smirnova.mp4';
		source.type = 'video/mp4';

		video.appendChild(source);

		document.body.appendChild(video);
		console.log("ADDED?")

		

		
		video.addEventListener('loadeddata', () => {

			
			console.log("VIDEO LOADED")

			
				
			let geometry1 = new THREE.PlaneBufferGeometry(2,2*640/360, 4,4);
			let texture = new THREE.VideoTexture( video );
			texture.minFilter = THREE.LinearFilter;
			texture.magFilter = THREE.LinearFilter;
			texture.format = THREE.RGBFormat;
			let material1 = new THREE.MeshBasicMaterial( { map: texture } );
						
			VideoMesh = new THREE.Mesh( geometry1, material1 );
            VideoMesh.position.y = 1
			scene.add(VideoMesh);
		});





      // Render the scene
      function animate() {
        requestAnimationFrame(animate);
        mesh.rotation.x += 0.01;
        mesh.rotation.y += 0.01;
        renderer.render(scene, camera);
      }
      animate();
    </script>
  </body>
</html>